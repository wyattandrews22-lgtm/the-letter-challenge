<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Letter Challenge</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #121213;
    color: #fff;
    margin: 0;
    padding: 0;
    text-align: center;
  }
  h1 {
    margin: 20px 0;
    color: #f3ba2f;
    text-shadow: 2px 2px #000;
  }
  .letters {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin: 15px 0;
    max-width: 90%;
  }
  .letter {
    border: 2px solid #3a3a3c;
    border-radius: 8px;
    padding: 22px;
    margin: 6px;
    font-size: 30px;
    width: 65px;
    text-align: center;
    cursor: pointer;
    user-select: none;
    background: #818384;
    color: #fff;
    font-weight: bold;
    transition: all 0.2s ease;
  }
  .letter:hover {
    background: #ffb74d;
    transform: scale(1.1);
    color: #000;
  }
  #wordInput {
    font-size: 26px;
    padding: 14px;
    width: 300px;
    text-align: center;
    border: 2px solid #3a3a3c;
    border-radius: 6px;
    background: #1e1e1e;
    color: #fff;
    margin-top: 10px;
    pointer-events: none;
  }
  .word-list {
    margin-top: 20px;
    width: 100%;
    max-width: 350px;
  }
  .word {
    padding: 5px;
    border-bottom: 1px solid #3a3a3c;
  }
  .score {
    margin-top: 20px;
    font-size: 28px;
    font-weight: bold;
    color: #4caf50;
    text-shadow: 1px 1px #000;
  }
  button {
    padding: 14px 24px;
    margin: 10px;
    font-size: 22px;
    border-radius: 8px;
    border: none;
    background: #538d4e;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  button:hover {
    background: #81c784;
  }
  .timer {
    font-size: 28px;
    margin-top: 15px;
    font-weight: bold;
    color: #f44336;
    text-shadow: 1px 1px #000;
  }
  #gameOverScreen {
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.9);
    color:#fff;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    font-size:24px;
    text-align:center;
  }
  #gameOverScreen button {
    margin-top:20px;
  }
</style>
</head>
<body>

<h1>Letter Challenge</h1>

<div id="startScreen">
  <p>Loading dictionary...</p>
  <button id="basicBtn" style="display:none;" onclick="startGame(5)">‚ñ∂Ô∏è Basic Mode</button>
  <button id="tenBtn" style="display:none;" onclick="startGame(10)">üî• Terrible Tens</button>
</div>

<div id="gameArea" style="display:none;">
  <div class="letters" id="letters"></div>
  <input type="text" id="wordInput" readonly>
  <div>
    <button onclick="submitWord()">‚úîÔ∏è Submit</button>
    <button onclick="undoLetter()">‚Ü©Ô∏è Undo</button>
  </div>
  <div class="timer" id="timer">‚è≥ 60</div>
  <div class="score" id="score">Score: 0</div>
  <div class="word-list" id="wordList"></div>
</div>

<div id="gameOverScreen">
  <div id="finalScore"></div>
  <button onclick="restartGame()">üîÑ Play Again</button>
</div>

<script>
let dictionary = [];
let letters = [];
let currentWord = [];
let foundWords = new Set();
let score = 0;
let timer, timeLeft = 60;
let letterCount = 5;

const lettersDiv = document.getElementById("letters");
const wordInput = document.getElementById("wordInput");
const wordListDiv = document.getElementById("wordList");
const scoreDisplay = document.getElementById("score");
const timerDisplay = document.getElementById("timer");

function shuffleArray(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

function pickRandomSet(count) {
  return shuffleArray("ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('')).slice(0,count).join('');
}

function displayLetters(arr){
  lettersDiv.innerHTML="";
  arr.forEach(l=>{
    const div=document.createElement("div");
    div.classList.add("letter");
    div.textContent=l;
    div.onclick=()=>{ currentWord.push(l); renderCurrentWord(); };
    lettersDiv.appendChild(div);
  });
}

function renderCurrentWord(){
  wordInput.value=currentWord.join('');
}

function undoLetter(){
  currentWord.pop();
  renderCurrentWord();
}

function submitWord(){
  const word=currentWord.join('').toLowerCase();
  if(timeLeft<=0) return;
  if(word.length>=2 && dictionary.includes(word) && !foundWords.has(word)){
    if([...word].every(l=>letters.includes(l.toUpperCase()))){
      foundWords.add(word);
      const wordDiv=document.createElement("div");
      wordDiv.classList.add("word");
      wordDiv.textContent=word;
      wordListDiv.appendChild(wordDiv);
      score+=word.length;
      scoreDisplay.textContent="Score: "+score;
    }
  }
  currentWord=[];
  renderCurrentWord();
}

function startGame(count){
  letterCount = count;
  document.getElementById("startScreen").style.display="none";
  document.getElementById("gameArea").style.display="block";
  score=0; foundWords.clear(); wordListDiv.innerHTML=""; scoreDisplay.textContent="Score: 0"; timeLeft=60;
  letters=shuffleArray(pickRandomSet(letterCount).split(''));
  displayLetters(letters);
  timerDisplay.textContent="‚è≥ "+timeLeft;
  timer=setInterval(()=>{
    timeLeft--;
    timerDisplay.textContent="‚è≥ "+timeLeft;
    if(timeLeft<=0){ clearInterval(timer); showGameOver(); }
  },1000);
}

function showGameOver(){
  document.getElementById("gameOverScreen").style.display="flex";
  document.getElementById("finalScore").textContent="Game Over! Final Score: "+score;
}

function restartGame(){
  document.getElementById("gameOverScreen").style.display="none";
  document.getElementById("startScreen").style.display="block";
}

// Load full dictionary
fetch("words.txt")
  .then(res => res.text())
  .then(text => {
    dictionary = text.split("\n").map(w => w.trim().toLowerCase());
    document.querySelector("#startScreen p").textContent = "Choose a mode:";
    document.getElementById("basicBtn").style.display="inline-block";
    document.getElementById("tenBtn").style.display="inline-block";
  });
</script>
</body>
</html>
