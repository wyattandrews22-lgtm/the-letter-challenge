<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Letter Challenge</title>
<link rel="manifest" href="manifest.json">
<style>
  body { font-family: Arial, sans-serif; background:#121213; color:white; margin:0; padding:0; text-align:center; }
  h1 { color:#f3ba2f; margin:20px 0; text-shadow:2px 2px #000; }
  .letters { display:flex; justify-content:center; margin:15px 0; flex-wrap:wrap; }
  .letter { border:2px solid #3a3a3c; border-radius:6px; margin:5px; font-size:20px; width:40px; height:40px; display:flex; justify-content:center; align-items:center; cursor:pointer; background:#818384; color:#fff; font-weight:bold; transition:0.2s; }
  .letter:hover { background:#ffb74d; color:black; transform:scale(1.1); }
  #wordInput { font-size:22px; padding:10px; width:220px; text-align:center; border:2px solid #3a3a3c; border-radius:6px; background:#1e1e1e; color:#fff; margin-top:10px; pointer-events:none; }
  .score, .timer { font-size:22px; margin:15px 0; font-weight:bold; }
  .score { color:#4caf50; }
  .timer { color:#f44336; }
  #gameOverScreen, #loadingScreen, #startScreen { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#121213; flex-direction:column; align-items:center; justify-content:center; }
  #gameOverScreen button, #startScreen button { margin-top:20px; padding:10px 16px; font-size:18px; border:none; border-radius:6px; background:#538d4e; color:white; font-weight:bold; cursor:pointer; }
  #gameOverScreen button:hover, #startScreen button:hover { background:#81c784; }
</style>
</head>
<body>

<h1>The Letter Challenge</h1>

<div id="loadingScreen">
  <h2>‚è≥ Loading...</h2>
</div>

<div id="startScreen">
  <button onclick="startGame()">‚ñ∂Ô∏è Start Game</button>
</div>

<div id="gameArea" style="display:none;">
  <div class="letters" id="letters"></div>
  <input type="text" id="wordInput" readonly>
  <div>
    <button onclick="submitWord()">‚úîÔ∏è</button>
    <button onclick="undoLetter()">‚Ü©Ô∏è</button>
  </div>
  <div class="timer" id="timer">‚è≥ 60</div>
  <div class="score" id="score">Score: 0</div>
  <div class="word-list" id="wordList"></div>
</div>

<div id="gameOverScreen">
  <div id="finalScore"></div>
  <button onclick="restartGame()">üîÑ Play Again</button>
</div>

<script>
// Demo dictionary ‚Äì you can expand this with a full word list
const dictionary = ["rat","tar","art","ear","are","sea","rate","tear","stare","care","crate","trace","react","cater","scar","cars","star","rest","tone","note","stone","eat","tea","ate"];

let letters = [];
let currentWord = [];
let foundWords = new Set();
let score = 0;
let timer, timeLeft = 60;

const lettersDiv = document.getElementById("letters");
const wordInput = document.getElementById("wordInput");
const wordListDiv = document.getElementById("wordList");
const scoreDisplay = document.getElementById("score");
const timerDisplay = document.getElementById("timer");

function shuffleArray(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

function pickValidSet() {
  let valid = false, chosenSet = "";
  while(!valid) {
    const candidate = shuffleArray("ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('')).slice(0,5).join('');
    let count=0;
    for(let word of dictionary){
      if(word.split('').every(l => candidate.includes(l.toUpperCase()))){
        count++;
      }
      if(count>=5){ valid=true; chosenSet=candidate; break; }
    }
  }
  return chosenSet;
}

function displayLetters(arr){
  lettersDiv.innerHTML="";
  arr.forEach(l=>{
    const div=document.createElement("div");
    div.classList.add("letter");
    div.textContent=l;
    div.onclick=()=>{ currentWord.push(l); renderCurrentWord(); };
    lettersDiv.appendChild(div);
  });
}

function renderCurrentWord(){
  wordInput.value=currentWord.join('');
}

function undoLetter(){
  currentWord.pop();
  renderCurrentWord();
}

function submitWord(){
  const word=currentWord.join('').toLowerCase();
  if(timeLeft<=0) return;
  if(word.length>=2 && dictionary.includes(word) && !foundWords.has(word)){
    foundWords.add(word);
    const wordDiv=document.createElement("div");
    wordDiv.textContent=word;
    wordListDiv.appendChild(wordDiv);
    score+=word.length;
    scoreDisplay.textContent="Score: "+score;
    if(foundWords.size >= 5){ showWin(); }
  }
  currentWord=[];
  renderCurrentWord();
}

function startGame(){
  document.getElementById("startScreen").style.display="none";
  document.getElementById("gameArea").style.display="block";
  score=0; foundWords.clear(); wordListDiv.innerHTML=""; scoreDisplay.textContent="Score: 0"; timeLeft=60;
  letters=shuffleArray(pickValidSet().split(''));
  displayLetters(letters);
  timerDisplay.textContent="‚è≥ "+timeLeft;
  timer=setInterval(()=>{
    timeLeft--;
    timerDisplay.textContent="‚è≥ "+timeLeft;
    if(timeLeft<=0){ clearInterval(timer); showGameOver(); }
  },1000);
}

function showGameOver(){
  document.getElementById("gameOverScreen").style.display="flex";
  document.getElementById("finalScore").textContent="Game Over! Final Score: "+score;
}

function showWin(){
  clearInterval(timer);
  document.getElementById("gameOverScreen").style.display="flex";
  document.getElementById("finalScore").textContent="üéâ You Win! Final Score: "+score;
}

function restartGame(){
  document.getElementById("gameOverScreen").style.display="none";
  document.getElementById("startScreen").style.display="block";
}

// Simulate loading
window.onload = () => {
  document.getElementById("loadingScreen").style.display="flex";
  setTimeout(()=>{
    document.getElementById("loadingScreen").style.display="none";
    document.getElementById("startScreen").style.display="flex";
  }, 1500); 
};

// Register service worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>
</body>
</html>
